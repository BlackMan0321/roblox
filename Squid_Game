print("BlackMan | Squid Game: Y√ºkleniyor")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local DEFAULT_WALKSPEED = 16
local DEFAULT_JUMPPOWER = 50
local MIN_SPEED, MAX_SPEED = 16, 1000
local MIN_JUMP, MAX_JUMP = 50, 200
local toggleKey = Enum.KeyCode.M

local themes = {
    dark={
        background=Color3.fromRGB(20,20,30),
        panel=Color3.fromRGB(35,35,45),
        accent=Color3.fromRGB(0,170,255),
        text=Color3.fromRGB(255,255,255),
        secondary=Color3.fromRGB(70,70,80)
    },
    light={
        background=Color3.fromRGB(240,240,250),
        panel=Color3.fromRGB(255,255,255),
        accent=Color3.fromRGB(0,120,255),
        text=Color3.fromRGB(25,25,25),
        secondary=Color3.fromRGB(200,200,200)
    }
}
local currentTheme="dark"

local function new(class,props)
    local obj=Instance.new(class)
    for k,v in pairs(props) do obj[k]=v end
    return obj
end

local gui=new("ScreenGui",{Name="ModernPanel",Parent=playerGui,ResetOnSpawn=false})
local main=new("Frame",{Parent=gui,Size=UDim2.new(0.38,0,0.55,0),Position=UDim2.new(0.5,0,0.5,0),AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=themes[currentTheme].panel})
new("UICorner",{Parent=main,CornerRadius=UDim.new(0,16)})
local sidebar=new("Frame",{Parent=main,Size=UDim2.new(0,160,1,0),BackgroundColor3=themes[currentTheme].background})
new("UICorner",{Parent=sidebar,CornerRadius=UDim.new(0,12)})
local content=new("Frame",{Parent=main,Size=UDim2.new(1,-160,1,0),Position=UDim2.new(0,160,0,0),BackgroundTransparency=1})

new("TextLabel",{Parent=main,Size=UDim2.new(1,0,0,20),Position=UDim2.new(0,0,1,-25),BackgroundTransparency=1,Font=Enum.Font.GothamBold,TextSize=14,TextColor3=Color3.fromRGB(200,200,200),Text="Made By BlackMan",TextXAlignment=Enum.TextXAlignment.Center})

local tabButtons={}

local function applyTheme(name)
    local t=themes[name]
    main.BackgroundColor3=t.panel
    sidebar.BackgroundColor3=t.background
    for _,obj in pairs(main:GetDescendants()) do
        if obj:IsA("TextLabel") or obj:IsA("TextButton") then obj.TextColor3=t.text end
        if obj:IsA("Frame") then
            if obj.BackgroundColor3==themes[currentTheme].accent then obj.BackgroundColor3=t.accent
            elseif obj.BackgroundColor3==themes[currentTheme].secondary then obj.BackgroundColor3=t.secondary end
        end
    end
    for _,btn in pairs(tabButtons) do btn.BackgroundColor3 = Color3.fromRGB(230,230,230) end
    currentTheme=name
end
applyTheme(currentTheme)

local tabs={}
local function createTab(name,icon)
    local btn=new("TextButton",{Parent=sidebar,Size=UDim2.new(1,-20,0,40),Position=UDim2.new(0,10,0,#tabs*50+20),BackgroundColor3=themes[currentTheme].secondary,Text="",AutoButtonColor=false})
    new("UICorner",{Parent=btn,CornerRadius=UDim.new(0,12)})
    new("TextLabel",{Parent=btn,Size=UDim2.new(0,40,1,0),Text=icon,BackgroundTransparency=1,Font=Enum.Font.GothamBold,TextSize=20,TextColor3=themes[currentTheme].text})
    new("TextLabel",{Parent=btn,Size=UDim2.new(1,-40,1,0),Position=UDim2.new(0,40,0,0),Text=name,BackgroundTransparency=1,Font=Enum.Font.GothamBold,TextSize=18,TextColor3=themes[currentTheme].text,TextXAlignment=Enum.TextXAlignment.Left})
    table.insert(tabButtons,btn)
    local page=new("Frame",{Parent=content,Size=UDim2.new(1,0,1,0),BackgroundTransparency=1,Visible=false})
    btn.MouseButton1Click:Connect(function()
        for _,t in pairs(tabs) do t.page.Visible=false end
        page.Visible=true
    end)
    table.insert(tabs,{button=btn,page=page})
    return page
end

local playerPage=createTab("Oyuncu","üë§")
local settingsPage=createTab("Ayarlar","‚öôÔ∏è")
local espPage=createTab("ESP","üîç")

local function createSlider(parent,label,min,max,default,callback)
    local frame=new("Frame",{Parent=parent,Size=UDim2.new(0,240,0,40),BackgroundTransparency=1})
    local txt=new("TextLabel",{Parent=frame,Size=UDim2.new(0.45,0,1,0),Text=label..": "..default,BackgroundTransparency=1,Font=Enum.Font.Gotham,TextSize=16,TextColor3=themes[currentTheme].text,TextXAlignment=Enum.TextXAlignment.Left})
    local sliderFrame=new("Frame",{Parent=frame,Size=UDim2.new(0.55,0,0.4,0),Position=UDim2.new(0.45,0,0.3,0),BackgroundColor3=themes[currentTheme].secondary})
    new("UICorner",{Parent=sliderFrame,CornerRadius=UDim.new(0,10)})
    local fill=new("Frame",{Parent=sliderFrame,Size=UDim2.new((default-min)/(max-min),0,1,0),BackgroundColor3=themes[currentTheme].accent})
    new("UICorner",{Parent=fill,CornerRadius=UDim.new(0,10)})
    local dragging=false
    sliderFrame.InputBegan:Connect(function(i) if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=true end end)
    UserInputService.InputEnded:Connect(function(i) if i.UserInputType==Enum.UserInputType.MouseButton1 then dragging=false end end)
    RunService.RenderStepped:Connect(function()
        if dragging then
            local pos=math.clamp((UserInputService:GetMouseLocation().X-sliderFrame.AbsolutePosition.X)/sliderFrame.AbsoluteSize.X,0,1)
            fill.Size=UDim2.new(pos,0,1,0)
            local value=math.floor(min+pos*(max-min))
            txt.Text=label..": "..value
            callback(value)
        end
    end)
    return frame
end

local function createToggle(parent,label,default,callback)
    local btn=new("TextButton",{Parent=parent,Size=UDim2.new(0,180,0,35),BackgroundColor3=themes[currentTheme].secondary,Text=label..": "..(default and "A√ßƒ±k" or "Kapalƒ±"),Font=Enum.Font.Gotham,TextSize=16,TextColor3=themes[currentTheme].text})
    new("UICorner",{Parent=btn,CornerRadius=UDim.new(0,10)})
    local state=default
    btn.MouseButton1Click:Connect(function()
        state=not state
        btn.Text=label..": "..(state and "A√ßƒ±k" or "Kapalƒ±")
        callback(state)
    end)
    return btn
end

local speedValue=DEFAULT_WALKSPEED
local jumpValue=DEFAULT_JUMPPOWER
local speedSlider=createSlider(playerPage,"Hƒ±z",MIN_SPEED,MAX_SPEED,DEFAULT_WALKSPEED,function(v) speedValue=v end)
speedSlider.Position=UDim2.new(0,20,0,20)
local jumpSlider=createSlider(playerPage,"Zƒ±plama",MIN_JUMP,MAX_JUMP,DEFAULT_JUMPPOWER,function(v) jumpValue=v end)
jumpSlider.Position=UDim2.new(0,20,0,70)

local infJump=false
local infBtn=createToggle(playerPage,"Sonsuz Zƒ±plama",false,function(s) infJump=s end)
infBtn.Position=UDim2.new(0,20,0,130)
UserInputService.JumpRequest:Connect(function()
    if infJump then
        local h=player.Character and player.Character:FindFirstChildOfClass("Humanoid")
        if h then h:ChangeState(Enum.HumanoidStateType.Jumping) end
    end
end)

local noclip=false
local noclipBtn=createToggle(playerPage,"Noclip",false,function(s) noclip=s end)
noclipBtn.Position=UDim2.new(0,20,0,180)

local themeBtn=new("TextButton",{Parent=settingsPage, Size=UDim2.new(0,160,0,40), Position=UDim2.new(0,20,0,20), Text="Tema Deƒüi≈ütir", Font=Enum.Font.GothamBold, TextSize=16, BackgroundColor3=themes[currentTheme].accent, TextColor3=Color3.new(1,1,1)})
new("UICorner",{Parent=themeBtn,CornerRadius=UDim.new(0,8)})
themeBtn.MouseButton1Click:Connect(function() applyTheme(currentTheme=="dark" and "light" or "dark") end)

local keyBtn=new("TextButton",{Parent=settingsPage,Size=UDim2.new(0,200,0,40),Position=UDim2.new(0,20,0,80),Text="Kƒ±sayol Deƒüi≈ütir (≈ûu an: M)",Font=Enum.Font.Gotham,TextSize=16,BackgroundColor3=themes[currentTheme].secondary,TextColor3=themes[currentTheme].text})
new("UICorner",{Parent=keyBtn,CornerRadius=UDim.new(0,8)})
keyBtn.MouseButton1Click:Connect(function()
    keyBtn.Text="Yeni tu≈üa bas..."
    local conn
    conn=UserInputService.InputBegan:Connect(function(input,gpe)
        if gpe then return end
        if input.KeyCode~=Enum.KeyCode.Unknown then
            toggleKey=input.KeyCode
            keyBtn.Text="Kƒ±sayol Deƒüi≈ütir (≈ûu an: "..toggleKey.Name..")"
            conn:Disconnect()
        end
    end)
end)

local espEnabled=false
local espColor=Color3.fromRGB(255,255,255)
local espSize=Vector2.new(200,50)
local espToggle=createToggle(espPage,"ESP",false,function(s) espEnabled=s end)
espToggle.Position=UDim2.new(0,20,0,20)

local colorBtn = new("TextButton",{Parent=espPage, Size=UDim2.new(0,150,0,30), Position=UDim2.new(0,20,0,70), Text="Renk Se√ß", BackgroundColor3=espColor, Font=Enum.Font.Gotham, TextSize=14, TextColor3=Color3.new(0,0,0)})
new("UICorner",{Parent=colorBtn, CornerRadius=UDim.new(0,6)})
colorBtn.MouseButton1Click:Connect(function()
    main.Visible=false
    local palette=new("Frame",{Parent=gui, Size=UDim2.new(0,240,0,150), Position=UDim2.new(0.5,-120,0.5,-75), BackgroundColor3=Color3.fromRGB(30,30,30)})
    new("UICorner",{Parent=palette, CornerRadius=UDim.new(0,8)})
    local colors={Color3.fromRGB(255,255,255), Color3.fromRGB(255,0,0), Color3.fromRGB(0,255,0), Color3.fromRGB(0,0,255), Color3.fromRGB(255,255,0), Color3.fromRGB(255,0,255), Color3.fromRGB(0,255,255), Color3.fromRGB(128,0,128)}
    for i,c in ipairs(colors) do
        local btn=new("TextButton",{Parent=palette,Size=UDim2.new(0,40,0,40),Position=UDim2.new(0,(i-1)*45,0,50),BackgroundColor3=c,Text="",AutoButtonColor=false})
        new("UICorner",{Parent=btn, CornerRadius=UDim.new(0,6)})
        btn.MouseButton1Click:Connect(function()
            espColor=c
            colorBtn.BackgroundColor3=c
            palette:Destroy()
            main.Visible=true
        end)
    end
end)

local sizeSlider=createSlider(espPage,"Boyut",50,300,espSize.X,function(v) espSize=Vector2.new(v,v/4) end)
sizeSlider.Position=UDim2.new(0,20,0,120)

local function createESP(playerTarget)
    if not playerTarget.Character then return end
    if playerTarget.Character:FindFirstChild("ESPGui") then return end
    local head=playerTarget.Character:FindFirstChild("Head")
    if not head then return end
    local billboard=new("BillboardGui",{Name="ESPGui",Size=UDim2.new(0,espSize.X,0,espSize.Y),Adornee=head,AlwaysOnTop=true,StudsOffset=Vector3.new(0,2,0),Parent=playerTarget.Character})
    local textLabel=new("TextLabel",{Size=UDim2.new(1,0,1,0),BackgroundTransparency=1,TextColor3=espColor,TextStrokeTransparency=0.4,Font=Enum.Font.SourceSansBold,TextSize=14,TextScaled=true,Parent=billboard})
end

RunService.Heartbeat:Connect(function()
    for _,v in pairs(Players:GetPlayers()) do
        if v~=player then
            if espEnabled then
                createESP(v)
                local gui=v.Character and v.Character:FindFirstChild("ESPGui")
                if gui and v.Character.PrimaryPart then
                    local hum=v.Character:FindFirstChildOfClass("Humanoid")
                    local distance=math.floor((player.Character.PrimaryPart.Position-v.Character.PrimaryPart.Position).Magnitude)
                    gui.Size=UDim2.new(0,espSize.X,0,espSize.Y)
                    gui.TextLabel.TextColor3=espColor
                    gui.TextLabel.Text=v.Name.." | "..(hum and math.floor(hum.Health) or 0).." | "..distance.."m"
                end
            else
                if v.Character and v.Character:FindFirstChild("ESPGui") then v.Character.ESPGui:Destroy() end
            end
        end
    end
end)

RunService.Heartbeat:Connect(function()
    local hum=player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.WalkSpeed=speedValue
        hum.JumpPower=jumpValue
        if noclip then
            for _,v in pairs(player.Character:GetDescendants()) do
                if v:IsA("BasePart") then v.CanCollide=false end
            end
        end
    end
end)

playerPage.Visible=true
UserInputService.InputBegan:Connect(function(input,gpe)
    if gpe then return end
    if input.KeyCode==toggleKey then main.Visible=not main.Visible
    elseif input.KeyCode==Enum.KeyCode.Q then gui:Destroy()
    end
end)
